{"ast":null,"code":"var _jsxFileName = \"/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/DraggableField.js\";\nimport React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nconst DraggableField = ({\n  field,\n  index,\n  onSelect,\n  onDelete,\n  onMove,\n  children\n}) => {\n  const ref = useRef(null);\n\n  // Set up drag source\n  const [{\n    isDragging\n  }, drag] = useDrag({\n    type: 'FORM_FIELD',\n    item: {\n      id: field.id,\n      index\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  });\n\n  // Set up drop target for reordering\n  const [{\n    handlerId\n  }, drop] = useDrop({\n    accept: 'FORM_FIELD',\n    collect: monitor => ({\n      handlerId: monitor.getHandlerId()\n    }),\n    hover: (item, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      onMove(dragIndex, hoverIndex);\n\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    }\n  });\n\n  // Initialize drag and drop refs\n  drag(drop(ref));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: `\n        padding-responsive \n        margin-responsive \n        field-container \n        border \n        border-dashed \n        cursor-pointer\n      `,\n    style: {\n      opacity: isDragging ? 0.5 : 1,\n      backgroundColor: isDragging ? '#f3f4f6' : 'transparent'\n    },\n    onClick: () => onSelect(field),\n    \"data-handler-id\": handlerId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drag-handle\",\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: '0.5rem',\n      borderBottom: '1px solid #e5e7eb',\n      paddingBottom: '0.5rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontWeight: 'bold',\n      color: '#6b7280'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      marginRight: '0.5rem',\n      cursor: 'move'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"\\u27F0\"), field.type.charAt(0).toUpperCase() + field.type.slice(1), \" Field\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    style: {\n      backgroundColor: '#f87171',\n      color: 'white',\n      padding: '0.25rem 0.5rem'\n    },\n    onClick: e => {\n      e.stopPropagation();\n      onDelete(field.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"\\u2715\")), children);\n};\nexport default DraggableField;","map":{"version":3,"names":["React","useRef","useDrag","useDrop","DraggableField","field","index","onSelect","onDelete","onMove","children","ref","isDragging","drag","type","item","id","collect","monitor","handlerId","drop","accept","getHandlerId","hover","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","createElement","className","style","opacity","backgroundColor","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","alignItems","marginBottom","borderBottom","paddingBottom","fontWeight","color","marginRight","cursor","charAt","toUpperCase","slice","padding","e","stopPropagation"],"sources":["/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/DraggableField.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\n\nconst DraggableField = ({ field, index, onSelect, onDelete, onMove, children }) => {\n  const ref = useRef(null);\n  \n  // Set up drag source\n  const [{ isDragging }, drag] = useDrag({\n    type: 'FORM_FIELD',\n    item: { id: field.id, index },\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n  });\n  \n  // Set up drop target for reordering\n  const [{ handlerId }, drop] = useDrop({\n    accept: 'FORM_FIELD',\n    collect: (monitor) => ({\n      handlerId: monitor.getHandlerId(),\n    }),\n    hover: (item, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      \n      const dragIndex = item.index;\n      const hoverIndex = index;\n      \n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      \n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n      \n      // Get vertical middle\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      \n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n      \n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n      \n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      \n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n      \n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n      \n      // Time to actually perform the action\n      onMove(dragIndex, hoverIndex);\n      \n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n  \n  // Initialize drag and drop refs\n  drag(drop(ref));\n  \n  return (\n    <div \n      ref={ref}\n      className={`\n        padding-responsive \n        margin-responsive \n        field-container \n        border \n        border-dashed \n        cursor-pointer\n      `}\n      style={{\n        opacity: isDragging ? 0.5 : 1,\n        backgroundColor: isDragging ? '#f3f4f6' : 'transparent',\n      }}\n      onClick={() => onSelect(field)}\n      data-handler-id={handlerId}\n    >\n      <div className=\"drag-handle\" style={{ \n        display: 'flex', \n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '0.5rem',\n        borderBottom: '1px solid #e5e7eb',\n        paddingBottom: '0.5rem'\n      }}>\n        <div style={{ fontWeight: 'bold', color: '#6b7280' }}>\n          <span style={{ marginRight: '0.5rem', cursor: 'move' }}>⟰</span>\n          {field.type.charAt(0).toUpperCase() + field.type.slice(1)} Field\n        </div>\n        <button\n          type=\"button\"\n          className=\"btn btn-secondary\"\n          style={{ backgroundColor: '#f87171', color: 'white', padding: '0.25rem 0.5rem' }}\n          onClick={(e) => {\n            e.stopPropagation();\n            onDelete(field.id);\n          }}\n        >\n          ✕\n        </button>\n      </div>\n      \n      {children}\n    </div>\n  );\n};\n\nexport default DraggableField;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}