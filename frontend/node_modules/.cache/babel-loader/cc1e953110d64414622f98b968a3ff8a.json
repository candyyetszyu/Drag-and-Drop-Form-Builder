{"ast":null,"code":"var _jsxFileName = \"/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/FormCanvas.js\";\nimport React, { useState } from 'react';\nimport FieldRenderer from '../shared/FieldRenderer';\nimport { useFormSubmission } from '../../hooks/useFormSubmission';\nconst FormCanvas = ({\n  fields,\n  isPreview,\n  onFieldSelect,\n  onFieldUpdate,\n  onFieldDelete,\n  formId\n}) => {\n  const [formData, setFormData] = useState({});\n  const {\n    submitForm,\n    submitted,\n    loading,\n    error\n  } = useFormSubmission();\n  const handleFieldChange = (fieldId, value) => {\n    setFormData({\n      ...formData,\n      [fieldId]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (isPreview && formId) {\n      try {\n        await submitForm(formId, formData);\n      } catch (err) {\n        // Error is handled by the hook\n      }\n    }\n  };\n  if (submitted) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card text-center padding-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }\n    }, \"Form Submitted Successfully!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }\n    }, \"Thank you for your submission.\"));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, fields.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center padding-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, \"Drag fields here to build your form.\")) : /*#__PURE__*/React.createElement(\"form\", {\n    className: \"space-responsive\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, fields.map(field => /*#__PURE__*/React.createElement(\"div\", {\n    key: field.id,\n    className: `padding-responsive margin-responsive ${isPreview ? '' : 'border border-dashed cursor-pointer'}`,\n    onClick: !isPreview ? () => onFieldSelect(field) : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FieldRenderer, {\n    field: field,\n    isPreview: isPreview,\n    onChange: value => {\n      if (isPreview) {\n        handleFieldChange(field.id, value);\n      } else {\n        onFieldUpdate({\n          ...field,\n          value\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }), !isPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end margin-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary mr-2\",\n    onClick: e => {\n      e.stopPropagation();\n      const position = fields.findIndex(f => f.id === field.id);\n      const newFields = [...fields];\n      if (position > 0) {\n        [newFields[position], newFields[position - 1]] = [newFields[position - 1], newFields[position]];\n        onFieldUpdate(newFields);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }\n  }, \"\\u2191\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary mr-2\",\n    onClick: e => {\n      e.stopPropagation();\n      const position = fields.findIndex(f => f.id === field.id);\n      const newFields = [...fields];\n      if (position < fields.length - 1) {\n        [newFields[position], newFields[position + 1]] = [newFields[position + 1], newFields[position]];\n        onFieldUpdate(newFields);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, \"\\u2193\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-error\",\n    onClick: e => {\n      e.stopPropagation();\n      onFieldDelete(field.id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }, \"Delete\")))), isPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center padding-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, loading ? 'Submitting...' : 'Submit Form'), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-error margin-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, error))));\n};\nexport default FormCanvas;","map":{"version":3,"names":["React","useState","FieldRenderer","useFormSubmission","FormCanvas","fields","isPreview","onFieldSelect","onFieldUpdate","onFieldDelete","formId","formData","setFormData","submitForm","submitted","loading","error","handleFieldChange","fieldId","value","handleSubmit","e","preventDefault","err","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","onSubmit","map","field","key","id","onClick","undefined","onChange","type","stopPropagation","position","findIndex","f","newFields","disabled"],"sources":["/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/FormCanvas.js"],"sourcesContent":["import React, { useState } from 'react';\nimport FieldRenderer from '../shared/FieldRenderer';\nimport { useFormSubmission } from '../../hooks/useFormSubmission';\n\nconst FormCanvas = ({ fields, isPreview, onFieldSelect, onFieldUpdate, onFieldDelete, formId }) => {\n  const [formData, setFormData] = useState({});\n  const { submitForm, submitted, loading, error } = useFormSubmission();\n\n  const handleFieldChange = (fieldId, value) => {\n    setFormData({\n      ...formData,\n      [fieldId]: value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (isPreview && formId) {\n      try {\n        await submitForm(formId, formData);\n      } catch (err) {\n        // Error is handled by the hook\n      }\n    }\n  };\n\n  if (submitted) {\n    return (\n      <div className=\"card text-center padding-responsive\">\n        <h2>Form Submitted Successfully!</h2>\n        <p>Thank you for your submission.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"card\">\n      {fields.length === 0 ? (\n        <div className=\"text-center padding-responsive\">\n          <p>Drag fields here to build your form.</p>\n        </div>\n      ) : (\n        <form className=\"space-responsive\" onSubmit={handleSubmit}>\n          {fields.map((field) => (\n            <div\n              key={field.id}\n              className={`padding-responsive margin-responsive ${isPreview ? '' : 'border border-dashed cursor-pointer'}`}\n              onClick={!isPreview ? () => onFieldSelect(field) : undefined}\n            >\n              <FieldRenderer\n                field={field}\n                isPreview={isPreview}\n                onChange={(value) => {\n                  if (isPreview) {\n                    handleFieldChange(field.id, value);\n                  } else {\n                    onFieldUpdate({ ...field, value });\n                  }\n                }}\n              />\n              {!isPreview && (\n                <div className=\"flex justify-end margin-responsive\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary mr-2\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      const position = fields.findIndex(f => f.id === field.id);\n                      const newFields = [...fields];\n                      if (position > 0) {\n                        [newFields[position], newFields[position - 1]] = [newFields[position - 1], newFields[position]];\n                        onFieldUpdate(newFields);\n                      }\n                    }}\n                  >\n                    ↑\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary mr-2\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      const position = fields.findIndex(f => f.id === field.id);\n                      const newFields = [...fields];\n                      if (position < fields.length - 1) {\n                        [newFields[position], newFields[position + 1]] = [newFields[position + 1], newFields[position]];\n                        onFieldUpdate(newFields);\n                      }\n                    }}\n                  >\n                    ↓\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-error\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onFieldDelete(field.id);\n                    }}\n                  >\n                    Delete\n                  </button>\n                </div>\n              )}\n            </div>\n          ))}\n          \n          {isPreview && (\n            <div className=\"text-center padding-responsive\">\n              <button \n                type=\"submit\" \n                className=\"btn btn-primary\"\n                disabled={loading}\n              >\n                {loading ? 'Submitting...' : 'Submit Form'}\n              </button>\n              {error && <div className=\"form-error margin-responsive\">{error}</div>}\n            </div>\n          )}\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default FormCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}