{"ast":null,"code":"var _jsxFileName = \"/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/FormBuilderPage.js\";\nimport React, { useState } from 'react';\nimport { useApi } from '../../hooks/useApi';\nimport { useFormState } from '../../hooks/useFormState';\nimport FieldPalette from './FieldPalette';\nimport FormCanvas from './FormCanvas';\nimport FieldConfigPanel from './FieldConfigPanel';\nconst FormBuilderPage = () => {\n  const [fields, setFields] = useState([]);\n  const [selectedField, setSelectedField] = useState(null);\n  const [isPreview, setIsPreview] = useState(false);\n  const {\n    loading,\n    error,\n    post\n  } = useApi();\n  const {\n    formValues,\n    handleInputChange\n  } = useFormState({\n    title: 'Untitled Form',\n    description: ''\n  });\n  const handleAddField = fieldType => {\n    const newField = {\n      id: Date.now(),\n      type: fieldType,\n      question: `New ${fieldType} question`,\n      isRequired: false,\n      options: fieldType === 'dropdown' ? [{\n        value: 'Option 1'\n      }] : [],\n      columns: fieldType === 'table' ? [{\n        name: 'Column 1',\n        type: 'text'\n      }] : []\n    };\n    setFields([...fields, newField]);\n  };\n  const handleFieldSelection = field => {\n    setSelectedField(field);\n  };\n  const handleFieldUpdate = updatedField => {\n    setFields(fields.map(field => field.id === updatedField.id ? updatedField : field));\n    if ((selectedField === null || selectedField === void 0 ? void 0 : selectedField.id) === updatedField.id) {\n      setSelectedField(updatedField);\n    }\n  };\n  const handleFieldDelete = fieldId => {\n    setFields(fields.filter(field => field.id !== fieldId));\n    if ((selectedField === null || selectedField === void 0 ? void 0 : selectedField.id) === fieldId) {\n      setSelectedField(null);\n    }\n  };\n  const handleSaveForm = async () => {\n    try {\n      const formData = {\n        ...formValues,\n        fields\n      };\n      const result = await post('/forms', formData);\n      alert('Form saved successfully!');\n      return result;\n    } catch (err) {\n      console.error('Error saving form:', err);\n    }\n  };\n  const togglePreview = () => setIsPreview(!isPreview);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container flex-col-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"padding-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, isPreview ? 'Form Preview' : 'Form Builder'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex gap-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    value: formValues.title,\n    onChange: handleInputChange,\n    className: \"input\",\n    placeholder: \"Form Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    onClick: togglePreview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, isPreview ? 'Edit' : 'Preview'), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: handleSaveForm,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, loading ? 'Saving...' : 'Save Form')), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }, error)), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, !isPreview && /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"padding-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"Field Types\"), /*#__PURE__*/React.createElement(FieldPalette, {\n    onFieldSelect: handleAddField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"padding-responsive flex-col-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormCanvas, {\n    fields: fields,\n    isPreview: isPreview,\n    onFieldSelect: handleFieldSelection,\n    onFieldUpdate: handleFieldUpdate,\n    onFieldDelete: handleFieldDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  })), !isPreview && selectedField && /*#__PURE__*/React.createElement(\"aside\", {\n    className: \"padding-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Field Configuration\"), /*#__PURE__*/React.createElement(FieldConfigPanel, {\n    field: selectedField,\n    onFieldUpdate: handleFieldUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default FormBuilderPage;","map":{"version":3,"names":["React","useState","useApi","useFormState","FieldPalette","FormCanvas","FieldConfigPanel","FormBuilderPage","fields","setFields","selectedField","setSelectedField","isPreview","setIsPreview","loading","error","post","formValues","handleInputChange","title","description","handleAddField","fieldType","newField","id","Date","now","type","question","isRequired","options","value","columns","name","handleFieldSelection","field","handleFieldUpdate","updatedField","map","handleFieldDelete","fieldId","filter","handleSaveForm","formData","result","alert","err","console","togglePreview","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","onClick","disabled","onFieldSelect","onFieldUpdate","onFieldDelete"],"sources":["/Users/judyyip/Downloads/Website/Marketing Campaign/frontend/src/components/builder/FormBuilderPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useApi } from '../../hooks/useApi';\nimport { useFormState } from '../../hooks/useFormState';\nimport FieldPalette from './FieldPalette';\nimport FormCanvas from './FormCanvas';\nimport FieldConfigPanel from './FieldConfigPanel';\n\nconst FormBuilderPage = () => {\n  const [fields, setFields] = useState([]);\n  const [selectedField, setSelectedField] = useState(null);\n  const [isPreview, setIsPreview] = useState(false);\n  const { loading, error, post } = useApi();\n  const { formValues, handleInputChange } = useFormState({\n    title: 'Untitled Form',\n    description: '',\n  });\n\n  const handleAddField = (fieldType) => {\n    const newField = {\n      id: Date.now(),\n      type: fieldType,\n      question: `New ${fieldType} question`,\n      isRequired: false,\n      options: fieldType === 'dropdown' ? [{ value: 'Option 1' }] : [],\n      columns: fieldType === 'table' ? [{ name: 'Column 1', type: 'text' }] : [],\n    };\n    setFields([...fields, newField]);\n  };\n\n  const handleFieldSelection = (field) => {\n    setSelectedField(field);\n  };\n\n  const handleFieldUpdate = (updatedField) => {\n    setFields(fields.map(field => field.id === updatedField.id ? updatedField : field));\n    if (selectedField?.id === updatedField.id) {\n      setSelectedField(updatedField);\n    }\n  };\n\n  const handleFieldDelete = (fieldId) => {\n    setFields(fields.filter(field => field.id !== fieldId));\n    if (selectedField?.id === fieldId) {\n      setSelectedField(null);\n    }\n  };\n\n  const handleSaveForm = async () => {\n    try {\n      const formData = {\n        ...formValues,\n        fields,\n      };\n      const result = await post('/forms', formData);\n      alert('Form saved successfully!');\n      return result;\n    } catch (err) {\n      console.error('Error saving form:', err);\n    }\n  };\n\n  const togglePreview = () => setIsPreview(!isPreview);\n\n  return (\n    <div className=\"container flex-col-auto\">\n      <header className=\"padding-responsive\">\n        <h1 className=\"text-responsive\">{isPreview ? 'Form Preview' : 'Form Builder'}</h1>\n        <div className=\"flex gap-responsive\">\n          <input\n            type=\"text\"\n            name=\"title\"\n            value={formValues.title}\n            onChange={handleInputChange}\n            className=\"input\"\n            placeholder=\"Form Title\"\n          />\n          <button \n            className=\"btn btn-secondary\"\n            onClick={togglePreview}\n          >\n            {isPreview ? 'Edit' : 'Preview'}\n          </button>\n          <button \n            className=\"btn btn-primary\"\n            onClick={handleSaveForm}\n            disabled={loading}\n          >\n            {loading ? 'Saving...' : 'Save Form'}\n          </button>\n        </div>\n        {error && <div className=\"form-error\">{error}</div>}\n      </header>\n      \n      <main className=\"flex\">\n        {!isPreview && (\n          <aside className=\"padding-responsive\">\n            <h2 className=\"text-responsive\">Field Types</h2>\n            <FieldPalette onFieldSelect={handleAddField} />\n          </aside>\n        )}\n        \n        <section className=\"padding-responsive flex-col-auto\">\n          <FormCanvas\n            fields={fields}\n            isPreview={isPreview}\n            onFieldSelect={handleFieldSelection}\n            onFieldUpdate={handleFieldUpdate}\n            onFieldDelete={handleFieldDelete}\n          />\n        </section>\n        \n        {!isPreview && selectedField && (\n          <aside className=\"padding-responsive\">\n            <h2 className=\"text-responsive\">Field Configuration</h2>\n            <FieldConfigPanel \n              field={selectedField} \n              onFieldUpdate={handleFieldUpdate} \n            />\n          </aside>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default FormBuilderPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}